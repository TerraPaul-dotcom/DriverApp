tour = {
    "tourId": 455,
    "fahrzeugId": 55,
    "schulIdListeTour": "75,74",
    "schuleNameMulti": "Manuell erstellte Rücktour von Mehrere Schulen Tour",
    "sonderfahrtId": null,
    "tourName": "Manuell erstellte Rücktour von Mehrere Schulen Tour",
    "anzahl": 4,
    "fahrzeugName": "Wen Fö Heid 33",
    "fahrerId": 165,
    "fahrerName": "Frisch, Hans",
    "anzahlAbschnitte": 6,
    "tourAbschnitte": [
      {
        "tourAbschnittId": 114255,
        "tourId": 454,
        "reihenfolge": 5,
        "haltMinutenDauerAnPunkt": 4,
        "anzahlSchueler": 0,
        "anzahlAenderung": -1,
        "idSchuleOderSchueler": 74,
        "idSchule": 74,
        "idSchueler": null,
        "nameSchuleOderSchueler": "Werdried Schule",
        "haltepunktStrasseUndNummer": "Strasse und Nr",
        "uhrzeitBeginnStrFormatiertHhMm": "07:42",
        "haltepunktOrt": "Raubling",
        "haltepunktPlz": "83064 ",
        "istEsEineSchule": true,
        "istEsEinSchueler": false,
        "uhrzeitEndeStrFormatiertHhMm": "07:42",
        "dauerStrFormatiertHhMm": "00:00"
      },
      {
        "tourAbschnittId": 114254,
        "tourId": 454,
        "reihenfolge": 4,
        "haltMinutenDauerAnPunkt": 4,
        "anzahlSchueler": 1,
        "anzahlAenderung": -3,
        "idSchuleOderSchueler": 75,
        "idSchule": 75,
        "idSchueler": null,
        "nameSchuleOderSchueler": "Keidel Förderstätte",
        "haltepunktStrasseUndNummer": "Strasse und Nr",
        "uhrzeitBeginnStrFormatiertHhMm": "07:37",
        "haltepunktOrt": "Raubling",
        "haltepunktPlz": "22222",
        "istEsEineSchule": true,
        "istEsEinSchueler": false,
        "uhrzeitEndeStrFormatiertHhMm": "07:42",
        "dauerStrFormatiertHhMm": "00:00"
      },
      {
        "tourAbschnittId": 114253,
        "tourId": 454,
        "reihenfolge": 3,
        "haltMinutenDauerAnPunkt": 2,
        "anzahlSchueler": 4,
        "anzahlAenderung": 1,
        "idSchuleOderSchueler": 4382,
        "idSchueler": 4382,
        "idSchule": 74,
        "nameSchuleOderSchueler": "K., E.",
        "haltepunktStrasseUndNummer": "Strasse und Nr",
        "uhrzeitBeginnStrFormatiertHhMm": "07:19",
        "haltepunktOrt": "Kolbermoor",
        "haltepunktPlz": "83059",
        "istEsEineSchule": false,
        "istEsEinSchueler": true,
        "uhrzeitEndeStrFormatiertHhMm": "07:37",
        "dauerStrFormatiertHhMm": "00:15"
      },
      {
        "tourAbschnittId": 114252,
        "tourId": 454,
        "reihenfolge": 2,
        "haltMinutenDauerAnPunkt": 5,
        "anzahlSchueler": 3,
        "anzahlAenderung": 1,
        "idSchuleOderSchueler": 3982,
        "idSchueler": 3982,
        "idSchule": 75,
        "nameSchuleOderSchueler": "H., O.",
        "haltepunktStrasseUndNummer": "Strasse und Nr",
        "uhrzeitBeginnStrFormatiertHhMm": "06:58",
        "haltepunktOrt": "Stephanskirchen",
        "haltepunktPlz": "83071",
        "istEsEineSchule": false,
        "istEsEinSchueler": true,
        "uhrzeitEndeStrFormatiertHhMm": "07:19",
        "dauerStrFormatiertHhMm": "00:15"
      },
      {
        "tourAbschnittId": 114251,
        "tourId": 454,
        "reihenfolge": 1,
        "haltMinutenDauerAnPunkt": 2,
        "anzahlSchueler": 2,
        "anzahlAenderung": 1,
        "idSchuleOderSchueler": 4004,
        "idSchueler": 4004,
        "idSchule": 75,
        "nameSchuleOderSchueler": "O., R.",
        "haltepunktStrasseUndNummer": "SStrasse und Nr",
        "uhrzeitBeginnStrFormatiertHhMm": "06:52",
        "haltepunktOrt": "Stephanskirchen",
        "haltepunktPlz": "83071",
        "istEsEineSchule": false,
        "istEsEinSchueler": true,
        "uhrzeitEndeStrFormatiertHhMm": "06:58",
        "dauerStrFormatiertHhMm": "00:04"
      },
      {
        "tourAbschnittId": 114250,
        "tourId": 454,
        "reihenfolge": 0,
        "haltMinutenDauerAnPunkt": 5,
        "anzahlSchueler": 1,
        "anzahlAenderung": 1,
        "idSchuleOderSchueler": 3981,
        "idSchueler": 3981,
        "idSchule": 75,
        "nameSchuleOderSchueler": "H., I.,",
        "haltepunktStrasseUndNummer": "Strasse und Nr",
        "uhrzeitBeginnStrFormatiertHhMm": "06:40",
        "haltepunktOrt": "Söchtenau",
        "haltepunktPlz": "83139",
        "istEsEineSchule": false,
        "istEsEinSchueler": true,
        "uhrzeitEndeStrFormatiertHhMm": "06:52",
        "dauerStrFormatiertHhMm": "00:11"
      }
    ],
    "uhrzeitBeginnStrFormatiertHhMm": "06:35",
    "uhrzeitEndeStrFormatiertHhMm": "07:46",
    "dauerStrFormatiertHhMm": "01:10",
    "begleitpersonAbholenJaNein": "Nein",
    "mitBetriebshofKuerzel": "Fz",
    "laengeFormattedInKM": "43,5",
    "laengeInKmDecimal": 43.55,
    "wochentagKurzMitSpace": "Mo, Di, Mi, Do, Fr",
    "rueckfahrtAsStringMini": "R"
  }

exports.create = async (Model, keyValueObject, res) => {
    if ((keyValueObject.benutzer != 'ee11cbb19052e40b07aac0ca060c23ee') || (keyValueObject.passwort != 'ee11cbb19052e40b07aac0ca060c23ee')) {
        res.status(400).send({ message: "Falscher Benutzername oder Passwort"})
        return
    } 
    
    try {
        const model = new Model (keyValueObject)
        const newEntry = await model.save()
        .then (data => {
            res.send(tour)
            data = null
        })
    } catch {
        res.status(500).send({
            message: 
                
            "Ein Fehler ist passiert beim Anlegen des Eintrages."
        })
    }
}

exports.findAll = async (Model, condition, res) => {
        try {
            
            const data = await Model.find(condition)
            res.send(data)
        } catch {
            err => {
            res.status(500).send({
                message:
                    err.message || "Ein Fehler ist beim abrufen passiert."
            })
        }
        }
}
exports.update = async (id, Model, dataToUpdate, res) => {
    Model.findByIdAndUpdate(id, dataToUpdate, {useFindAndModify: false})
    .then(data => {
        if (!data) {
            res.status(404).send({
                message: "Ein Fehler ist beim updaten des Eintrages passiert, Eintrag konnte wahrscheinlich nicht gefunden werden."
            })
            } else res.send({message: "Eintrag erfolgreich angepasst"})
        
    })
    .catch(err => {
        res.status(500).send({
            message: "Ein Fehler ist beim updaten des Eintrages passiert"
        })
    })
}

exports.delete = async (id, Model, res) => {
    Model.findByIdAndRemove(id)
        .then(data => {
            if (!data) {
                res.status(404).send({
                    message: "Fehler beim Löschen des Eintrages, eventuell konnte er nicht gefunden werden."
                })
            } else {
                res.send({
                    message: "Eintrag wurde erfolgreich gelöscht"
                })
            }
        })
        .catch (err => {
            res.status(500).send({
                message: "Eintrag konnte nicht gelöscht werden."
            })
        })
}

exports.findById = async (id, Model, res) => {
    try {  
        const data = await Model.findById(id)
        res.send(data)
    } catch {
        err => {
        res.status(500).send({
            message: err.message || "Ein Fehler ist beim abrufen passiert."
        })
    }
    }
}

exports.findNewest = async (Model, condition, res) => {
    try {
        if (!condition) {condition = null}
        const data = await Model.find(condition).limit(1).sort({$natural:-1})
        res.send(data)
    } catch (err) {
        res.status(500).send({
            message: err.message || "Ein Fehler ist beim abrufen passiert."
        })
    }
}